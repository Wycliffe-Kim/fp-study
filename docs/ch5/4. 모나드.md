# 모나드

모나드는 특정한 케이스를 특정한 로직에 위임하여 처리할 수 있게 해준다는 점에서만 함수자와 다르다.

만약에 `half`라는 함수가 있따고 생각해보자. 이 함수는 어떤 숫자를 입력으로 받으면 그 숫자를 2로 나누어 출력해주는 함수다. 그런데 만약에 이 함수를 짝수일 경우만(특정 케이스) 수행할 수 있도록 하고 싶다면 어떻게 해야 할까?

그럴 때에는 `Wrapper`와 비슷하나, 처리를 물 흐르듯이 흘러가게 할 수 있는 `Empty`라는 함수자를 하나 더 만들어야 한다.

``` javascript
// javascript
class Empty {
  map(f) {
    return this;
  }

  fmap(f) {
    return new Empty();
  }
}
```

``` python
# python
class Empty:
    def map(self, f):
        return self

    def fmap(self, f):
        return Empty()
```

그 후에 코드를 다음과 같이 작성하고 결과를 보면 다음과 같다.

``` javascript
// javascript
const isEven = (n) => n % 2 === 0;
const half = (val) => isEven(val) ? new Wrppaer(val / 2) : new Empty();

half(4); // Wrapper(2)
half(3); // Empty()

half(4).fmap(add(3)); // Wrapper(7)
half(3).fmap(add(3)); // Empty()
```

``` python
# python
is_even = lambda n: n % 2 == 0
half = lambda val: Wrapper(val / 2) if is_even(val) else Empty()

half(4) # Wrapper(2)
half(3) # Empty()

half(4).fmap(add(3)) # Wrapper(7)
half(3).fmap(add(3)) # Empty()
```

이와 같이 모나드를 구성하면 비록 잘못된 값이 반환되더라도 문제 없이 처리를 물 흐르듯이 할 수 있다.

